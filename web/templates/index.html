<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPlaySync</title>
    <!-- Favicon: Red Play Button -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2250%22 fill=%22%23ff0000%22/><polygon points=%2235,30 35,70 75,50%22 fill=%22%23ffffff%22/></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css?v=4">
</head>
<body>
    <div class="background-gradient"></div>

    <div class="glass-container">
        <div class="background-blobs">
            <div class="blob blob-1"></div>
            <div class="blob blob-2"></div>
            <div class="blob blob-3"></div>
        </div>

        <header>
            <div class="logo">
                <i class="fa-brands fa-youtube" style="color: #ff0000;"></i> UPlaySync
            </div>
            <div class="header-controls">
                <div class="status-badge" id="statusBadge">
                    <span class="dot"></span>
                    <span id="statusText">대기 중</span>
                </div>
                <button id="historyBtn" class="icon-button" title="다운로드 기록">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                </button>
                <button id="configBtn" class="icon-button" title="설정">
                    <i class="fa-solid fa-gear"></i>
                </button>
            </div>
        </header>

        <main>
            <div class="content-wrapper">
                <div class="hero-section">
                    <h1>Playlist<br>Synchronizer</h1>
                    <p>YouTube 플레이리스트를 미디어 서버와 자동으로 동기화하고 관리하세요.</p>
                    
                    <div class="action-buttons">
                        <button id="runBtn" class="glow-button">
                            <i class="fa-solid fa-bolt"></i> 동기화 시작
                        </button>
                        <button id="stopBtn" class="glow-button stop" style="display: none;">
                            <i class="fa-solid fa-stop"></i> 중지
                        </button>
                    </div>
                </div>

                <div class="console-window">
                    <div class="console-header">
                        <div class="console-title">_ 실시간 로그</div>
                        <div class="console-controls">
                            <div class="control red"></div>
                            <div class="control yellow"></div>
                            <div class="control green"></div>
                        </div>
                    </div>
                    <div class="console-body" id="logContainer">
                        <div class="log-line system">[시스템] 준비 완료. '동기화 시작' 버튼을 눌러주세요.</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content glass-panel">
            <span class="close-modal">&times;</span>
            <h2><i class="fa-solid fa-cog"></i> 설정</h2>
            
            <div class="config-section">
                <h3>미디어 서버 주소</h3>
                <div class="config-card">
                    <input type="text" id="metubeUrl" placeholder="http://localhost:8081">
                </div>
            </div>

            <div class="config-section">
                <h3>자동 동기화 주기</h3>
                <div class="config-card" style="display: flex; align-items: center; justify-content: space-between; padding: 15px 20px;">
                    <!-- Left: Compact Controls -->
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <span style="color: #ddd; font-size: 0.95rem; font-weight: 500;">시간 단위 실행</span>
                        
                        <div style="display: flex; align-items: center; gap: 5px; background: rgba(0,0,0,0.2); padding: 4px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);">
                            <button class="spin-btn small" id="decreaseInterval"><i class="fa-solid fa-minus"></i></button>
                            <div style="position: relative; width: 60px;">
                                <input type="text" id="scheduleInterval" inputmode="numeric" pattern="[0-9]*" placeholder="0" style="width: 100%; text-align: center; font-weight: bold; border: none; background: transparent; height: 30px; font-size: 1rem;">
                            </div>
                            <button class="spin-btn small" id="increaseInterval"><i class="fa-solid fa-plus"></i></button>
                        </div>
                        
                        <span style="font-size: 0.8rem; color: #666; margin-left: 5px;">
                            (0 입력 시 비활성화)
                        </span>
                    </div>

                    <!-- Right: Status -->
                    <div style="flex: 1; text-align: right; display: flex; flex-direction: column; justify-content: center; gap: 3px;">
                        <div style="font-size: 0.8rem; color: #aaa;">
                            <span style="color: #666;">최근:</span> <span id="lastRunDisplay" style="font-family: monospace;">-</span>
                        </div>
                        <div style="font-size: 0.8rem; color: #aaa;">
                            <span style="color: #666;">예정:</span> <span id="nextRunDisplay" style="color:var(--primary-color); font-weight:bold; font-family: monospace;">-</span>
                        </div>
                    </div>
                </div>
            </div>
    
            <div class="config-section">
                <h3>플레이리스트 관리</h3>
                <div id="playlistContainer" class="playlist-list">
                    <!-- Dynamic Playlist Items -->
                </div>
                <button id="addPlaylistBtn" class="action-button small"><i class="fa-solid fa-plus"></i> 추가</button>
            </div>
    
            <div class="modal-actions">
                <button id="saveConfigBtn" class="glow-button small">저장</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
        <div class="modal-content glass-panel history-modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fa-solid fa-clock-rotate-left"></i> 다운로드 기록</h2>
            
            <div class="search-bar">
                <i class="fa-solid fa-search"></i>
                <input type="text" id="historySearch" placeholder="파일명 또는 ID 검색...">
            </div>

            <div class="history-table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>파일명 (Title)</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- Dynamic History Items -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Template for Playlist Item -->
    <template id="playlistItemTemplate">
        <div class="playlist-item">
            <input type="text" class="pl-name" placeholder="이름 (예: K-Pop)">
            <input type="text" class="pl-url" placeholder="YouTube Playlist URL">
            <input type="text" class="pl-folder" placeholder="저장 폴더 (/music)">
            <input type="text" class="pl-metube" placeholder="서버 내 경로 (optional)">
            <button class="delete-btn"><i class="fa-solid fa-trash"></i></button>
        </div>
    </template>

    <script src="/static/script.js?v=2"></script>
</body>
</html>
